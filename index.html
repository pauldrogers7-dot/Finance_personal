<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finance Pro: Fixed Dropdowns</title>
    <style>
        :root { --primary: #2c3e50; --success: #27ae60; --danger: #e74c3c; --accent: #3498db; --warning: #f39c12; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: #f0f2f5; margin: 0; padding: 0; }
        nav { background: var(--primary); color: white; padding: 0 20px; display: flex; align-items: center; height: 60px; gap: 30px; position: sticky; top: 0; z-index: 1000; }
        .nav-btn { cursor: pointer; padding: 15px 10px; font-weight: bold; border-bottom: 3px solid transparent; opacity: 0.7; }
        .nav-btn.active { border-bottom: 3px solid var(--accent); opacity: 1; }
        .container { padding: 25px; max-width: 1200px; margin: 0 auto; }
        .card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .grid { display: grid; grid-template-columns: 2fr 1fr; gap: 20px; }
        .page-content { display: none; }
        .page-content.active { display: block; }
        .bal-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; }
        .bal-card { background: var(--accent); color: white; padding: 20px; border-radius: 10px; text-align: center; }
        .bal-card strong { font-size: 1.5em; display: block; }
        input, select, button { width: 100%; padding: 12px; margin: 8px 0; border-radius: 6px; border: 1px solid #ccc; box-sizing: border-box; }
        button { cursor: pointer; border: none; font-weight: bold; }
        .btn-go { background: var(--success); color: white; }
        .btn-main { background: var(--primary); color: white; }
        .due-banner { background: #fff9e6; border-left: 5px solid var(--warning); padding: 15px; border-radius: 8px; margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center; }
        table { width: 100%; border-collapse: collapse; }
        th, td { text-align: left; padding: 12px; border-bottom: 1px solid #eee; }
    </style>
</head>
<body>

<nav>
    <div style="font-size: 1.4em; font-weight: bold; color: var(--accent); margin-right: 20px;">FinanceVault</div>
    <div class="nav-btn active" id="tab-dash" onclick="switchPage('dash')">Dashboard</div>
    <div class="nav-btn" id="tab-cats" onclick="switchPage('cats')">Manage Categories</div>
</nav>

<div class="container">
    <div id="view-dash" class="page-content active">
        <div id="recurring-alerts"></div>
        <div class="card">
            <h2>Account Balances</h2>
            <div id="render-balances" class="bal-grid"></div>
        </div>
        <div class="grid">
            <div class="left-col">
                <div class="card">
                    <h3>One-Off Transaction</h3>
                    <form onsubmit="postTx(event)">
                        <div style="display:flex; gap:10px;">
                            <input type="text" id="tx-desc" placeholder="Description" required>
                            <input type="number" id="tx-amt" placeholder="Amount £" step="0.01" required>
                        </div>
                        <div style="display:flex; gap:10px;">
                            <select id="sel-acc"></select>
                            <select id="sel-cat"></select>
                            <input type="date" id="tx-date" required>
                        </div>
                        <button class="btn-go">Add Transaction</button>
                    </form>
                </div>
                <div class="card">
                    <h3>Recent History</h3>
                    <table>
                        <thead><tr><th>Date</th><th>Description</th><th>Amount</th><th>Acc</th><th></th></tr></thead>
                        <tbody id="render-history"></tbody>
                    </table>
                </div>
            </div>
            <div class="right-col">
                <div class="card" style="border-left: 5px solid var(--warning);">
                    <h3>Add Recurring Payment</h3>
                    <form onsubmit="postTemplate(event)">
                        <input type="text" id="rt-desc" placeholder="Netflix/Rent/Salary" required>
                        <input type="number" id="rt-amt" placeholder="Amount £" step="0.01" required>
                        <input type="date" id="rt-date" required>
                        <select id="rt-acc"></select>
                        <select id="rt-cat"></select>
                        <button class="btn-main">Save Template</button>
                    </form>
                </div>
                <div class="card">
                    <h3>Setup Bank Account</h3>
                    <form
